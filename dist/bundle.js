(()=>{"use strict";function t(t,e){const n=JSON.stringify(e);localStorage.setItem(t,n)}function e(t){const e=localStorage.getItem(t);if(e)try{return JSON.parse(e)}catch(e){console.error(`Error parsing ${t} data:`,e)}return null}function n(t,e,n){const o=document.querySelector(".circle");o.style.top=t*n+"px",o.style.left=e*n+"px"}let o=0,c=0;const r=50,s=e("posData");function i(e,n,o){const c=function(t,e,n){const o=[];for(let c=0;c<e;c++){const e=[];for(let o=0;o<n;o++){const r=t[(c*n+o)%t.length];e.push(r)}o.push(e)}return o}(function(t,e){const n=t.reduce(((t,e)=>t+e.weight),0),o=[];for(let c=0;c<e;c++){const e=Math.random()*n;let c,r=0;for(const n of t)if(r+=n.weight,e<=r){c=n.type;break}const s=c;o.push(s)}return o}([{type:"square",weight:10},{type:"square2",weight:50},{type:"square3",weight:100}],n*o),n,o);a(e,c),function(e){t("mapData",e)}(c)}function a(t,e){t.innerHTML="";const n=[];for(const o of e)for(const e of o){const o=document.createElement("div");o.classList.add("cell",e),t.appendChild(o),n.push(e)}const s=document.createElement("div");return s.classList.add("circle"),t.appendChild(s),s.style.top=o*r+"px",s.style.left=c*r+"px",n}o=s?s.posY:0,c=s?s.posX:0,document.addEventListener("DOMContentLoaded",(function(){const s=document.getElementById("container"),l=document.getElementById("resetButton"),u=s.offsetWidth,d=s.offsetHeight,f=Math.min(Math.floor(u/r),10),p=Math.min(Math.floor(d/r),10),m=e("mapData");m?a(s,m):i(s,p,f),n(o,c,r),l.addEventListener("click",(function(){i(s,p,f),n(o,c,r)})),document.addEventListener("keydown",(function(e){const s=e.key;let i=o,a=c,l=0;const u=document.getElementById("counter"),d=document.querySelector(".circle");let h;if(" "===s){d.style.pointerEvents="none",l++,u.textContent=l;let t=!0;clearTimeout(h),h=setTimeout((function(){d.style.pointerEvents="auto",t=!1}),1e3)}"ArrowUp"===s&&o>0?i--:"ArrowDown"===s&&o<p-1?i++:"ArrowLeft"===s&&c>0?a--:"ArrowRight"===s&&c<f-1&&a++;const y=m[i][a];["square"].includes(y)||(o=i,c=a),n(o,c,r),t("posData",{posX:c,posY:o})}))}))})();